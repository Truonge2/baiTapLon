<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Page</title>
</head>
<body>
    <h1>Product Page</h1>
    <img src="../anh/kinh/0OO9400__940007__P21__shad__fr.png" alt="" style="width: 50%;">
      <input type="text" id="name" placeholder="name">
      <input type="text" id="price" placeholder="price">
    <button onclick="addToCart2()">Add Product 1 to Cart</button>

    <button onclick="remove(document.getElementById('name').value, document.getElementById('price').value)">Remove</button>

    <script>
        //  window.addEventListener('beforeunload', addToCart2());
         
      function remove(name,price) {
         // Retrieve cart items from localStorage
                  let cartItems = JSON.parse(localStorage.getItem('cart')) || [];

                  // Find index of the item with name "aaa"
                  let indexToRemove = cartItems.findIndex(item => item.name === name && item.price === price);

                  if (indexToRemove !== -1) { // Check if item with name "aaa" exists
                  // Remove the item from the cart array
                  cartItems.splice(indexToRemove, 1);
                //   cartItems.push({ name: 'san pham moi', price: '9999999' });
                  // Update the cart in localStorage with the modified cart array
                  localStorage.setItem('cart', JSON.stringify(cartItems));

                  console.log('Item with name = ' + name + ' removed from cart.');
                  } else {
                  console.log('Item with name ' + name + ' not found in cart.');
                  }
      }
            function addToCart2() {
                  let productName = document.getElementById('name');
                  let price = document.getElementById('price');
                  let img = document.querySelector('img').innerHTML;
                
                  console.log(productName.value + " " +price.value +" " +img.innerText);
                  if(productName.value && price.value){
                        addToCart("11", "11","99");
                  }
                        

                  productName.innerText = '';
                  price.innerText = '';
            }
        function addToCart(productName, price,img) {
            // Retrieve existing cart items from localStorage or create an empty array
            let cartItems = JSON.parse(localStorage.getItem('cart')) || [];

            // Add the new item to the cart
            cartItems.push({ name: productName, price: price ,img:img});

            // Save the updated cart back to localStorage
            localStorage.setItem('cart', JSON.stringify(cartItems));

            alert('Product added to cart!');
        }
    </script>
</body>
</html>
